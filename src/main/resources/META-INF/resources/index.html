<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>thesis-chatbot - 1.0-SNAPSHOT</title>

    <link rel="stylesheet" href="./styles/style.css">
    <link rel="stylesheet" href="./styles/darkmode.css">

    <script src="js/Message.js"></script>
    <script src="js/DualMessage.js"></script>
    <script src="js/ErrorMessage.js"></script>
    <script src="js/LoadingMessage.js"></script>
    <script src="js/RatingHint.js"></script>
    <script src="js/ChatService.js"></script>
    <script src="js/UIService.js"></script>
    <script src="js/RatingService.js"></script>
    <script src="js/MarkdownParser.js"></script>

</head>
<body>
<div class="chat-container">
    <div class="tool-container">
        <button class="tool" id="clear">Clear</button>
        <div class="tool-text-img-box">
            <div>Theme:</div>
            <button class="tool" id="darkmode"><img src="pictures/darkmode.svg" width="24px" height="20px"></button>
        </div>


    </div>
    <div class="conversation-container" id="scroller">

        <div id="conversation">
            <div class="ai-message message">
                    <div class="icon"></div>
                        <div class="message-content">
                            <div class="name">Bot</div>
                            <p class="text">Hallo! Wie kann ich dir in den Themen Gesundheitsinformatik, Telemedizin und dem deutschen Gesundheitswesen behilflich sein? </p>
                        </div>
                </div>

        </div>
        <div id="anchor"></div>
    </div>
    <div class="input-container">
        <input type="text" id="input" class="input" placeholder="Type a message...">
        <div class="popup" id="popup">Bitte gebe eine Bewertung ab!</div>
        <button id="send" class="send"><img src="pictures/send.svg"></button>
    </div>
    <div class="hint-bottom">
        <p>Der Chat geht nach dem Neuladen der Seite verloren!</p>
    </div>
</div>
</body>
<script>



    const chatService = new ChatService();

    const input = document.getElementById('input');
    const send = document.getElementById('send');
    const clear = document.getElementById('clear');
    const ratingHint = new RatingHint();
    const uiService = new UIService();

    window.onload = function() {
        uiService.loadDarkMode();
    };

    send.addEventListener('click', function() {
        if (input.value === ''){

        } else{
            input.disabled = true;
            chatService.getDualAnswer(input.value,ratingHint);
            input.value = '';
        }
    });

    input.addEventListener('keyup', function(event) {
        if(input.value !== ''){
        if (event.key === 'Enter') {
            input.disabled = true;
            chatService.getDualAnswer(input.value,ratingHint);
            input.value = '';
        }}
    });

    clear.addEventListener('click', function() {
        chatService.clearMessages();
    });

    document.getElementById('darkmode').addEventListener('click', function() {
        uiService.toggleDarkMode();
        //save darkmode state
        uiService.saveDarkMode();
    });

    uiService.enablePopUp();




</script>
</html>
